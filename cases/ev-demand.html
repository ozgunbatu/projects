<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EV Demand Case Study – Germany</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  .kpi-number { font-variant-numeric: tabular-nums; }
  .kpi-card { transition: transform 0.3s; cursor: default; }
  .kpi-card:hover { transform: scale(1.05); }
  a { text-decoration: underline; color: rgb(14,165,233); }
  a:hover { color: rgb(34,197,94); }
</style>
</head>
<body class="bg-slate-50 font-sans text-slate-900">

<header class="max-w-6xl mx-auto px-6 py-10 text-center">
  <h1 class="text-4xl font-black mb-2">EV Demand Forecast – Germany</h1>
  <p class="text-slate-600 max-w-3xl mx-auto">
    The rapid adoption of electric vehicles in Germany creates regional supply imbalances. 
    Some areas have excess stock while others face shortages, increasing operational costs and delaying deliveries.
    We analyzed historical sales and registration data to optimize inventory allocation, improve forecast accuracy, and accelerate decision-making.
  </p>
  <a href="../index.html" class="text-emerald-600 hover:underline mt-4 inline-block">← Back to Portfolio</a>
</header>

<main class="max-w-6xl mx-auto px-6 space-y-12">

  <!-- Problem -->
  <section class="bg-white p-6 rounded-2xl shadow-lg">
    <h2 class="text-2xl font-bold mb-4">Problem</h2>
    <p>
      Example: In Hamburg, stock was 20 vehicles vs. 50 orders, causing delays and extra costs. 
      Similar imbalances existed elsewhere. The goal: optimize inventory, improve forecast accuracy, and enable rapid data-driven decisions.
    </p>
  </section>

  <!-- Data -->
  <section class="bg-white p-6 rounded-2xl shadow-lg">
    <h2 class="text-2xl font-bold mb-4">Data Sources & Cleaning</h2>
    <ul class="list-disc list-inside space-y-2">
      <li><a href="https://www.autoscout24.com/" target="_blank">AutoScout24</a>: EV sales & listing data</li>
      <li><a href="https://www.zsw-bw.de/en/media-center/data-service.html" target="_blank">ZSW Electromobility</a>: Regional EV registration & trends</li>
      <li>Total dataset: 2.3M rows, cleaned via SQL (duplicates removed, nulls fixed, dates normalized)</li>
    </ul>
  </section>

  <!-- Slider -->
  <section class="bg-white p-6 rounded-2xl shadow-lg text-center">
    <h2 class="text-2xl font-bold mb-4">Demand Scenario Simulation</h2>
    <input type="range" id="demandSlider" min="-20" max="20" value="0" step="1" class="w-full">
    <p class="mt-2 text-slate-600">Adjust forecast ±%: <span id="sliderValue">0</span>%</p>
  </section>

  <!-- Charts -->
  <section class="grid md:grid-cols-2 gap-6">
    <div class="bg-white p-6 rounded-2xl shadow-lg">
      <h3 class="text-xl font-bold mb-2">Forecast vs Actual Demand</h3>
      <canvas id="evChart" height="220"></canvas>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow-lg">
      <h3 class="text-xl font-bold mb-2">Regional Inventory Levels</h3>
      <canvas id="inventoryChart" height="220"></canvas>
    </div>
  </section>

  <!-- KPI Cards -->
  <section class="grid md:grid-cols-4 gap-4 text-center">
    <div class="kpi-card bg-emerald-50 p-6 rounded-2xl shadow">
      <h4 class="font-bold text-xl mb-1">Inventory Change</h4>
      <p class="text-emerald-600 text-3xl font-black kpi-number" data-target="-7">0</p>
      <p class="text-sm text-slate-500">%</p>
      <p class="text-slate-500 text-xs mt-1">Net reduction in excess stock, balanced with low-stock regions</p>
    </div>
    <div class="kpi-card bg-blue-50 p-6 rounded-2xl shadow">
      <h4 class="font-bold text-xl mb-1">Forecast Error</h4>
      <p class="text-blue-600 text-3xl font-black kpi-number" data-target="22">0</p>
      <p class="text-sm text-slate-500">%</p>
      <p class="text-slate-500 text-xs mt-1">Difference between predicted vs actual demand reduced by historical data analysis</p>
    </div>
    <div class="kpi-card bg-yellow-50 p-6 rounded-2xl shadow">
      <h4 class="font-bold text-xl mb-1">Decision Speed</h4>
      <p class="text-yellow-600 text-3xl font-black kpi-number" data-target="15">0</p>
      <p class="text-sm text-slate-500">%</p>
      <p class="text-slate-500 text-xs mt-1">Faster decisions via interactive dashboard and scenario simulation</p>
    </div>
    <div class="kpi-card bg-purple-50 p-6 rounded-2xl shadow">
      <h4 class="font-bold text-xl mb-1">Regions Optimized</h4>
      <p class="text-purple-600 text-3xl font-black kpi-number" data-target="6">0</p>
      <p class="text-slate-500 text-xs mt-1">Hamburg, Berlin, North, South, East, West</p>
    </div>
  </section>

</main>

<script>
// KPI animation
function animateKPI(){
  const counters = document.querySelectorAll('.kpi-number');
  counters.forEach(counter=>{
    const target = +counter.getAttribute('data-target');
    let count = 0;
    const increment = Math.abs(target)/50;
    const isNegative = target < 0;
    const interval = setInterval(()=>{
      count += increment;
      if(count >= Math.abs(target)){
        counter.textContent = isNegative ? `-${Math.round(Math.abs(target))}` : Math.round(target);
        clearInterval(interval);
      } else counter.textContent = isNegative ? `-${Math.round(count)}` : Math.round(count);
    },30);
  });
}
animateKPI();

// Forecast vs Actual
const evCtx = document.getElementById('evChart').getContext('2d');
const evChart = new Chart(evCtx, {
    type:'line',
    data:{
        labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],
        datasets:[
            {label:"Forecast", data:[120,150,180,240,300,360,400,420], borderColor:"rgb(34,197,94)", fill:false, tension:0.2},
            {label:"Actual", data:[110,145,170,230,310,355,390,430], borderColor:"rgb(14,165,233)", fill:false, tension:0.2}
        ]
    },
    options:{responsive:true, plugins:{legend:{position:'top'}, tooltip:{mode:'index', intersect:false}}}
});

// Regional Inventory with Before/After simulation
const invCtx = document.getElementById('inventoryChart').getContext('2d');
const inventoryData = {
    labels:["Hamburg","Berlin","North","South","East","West"],
    datasets:[
        {label:"Before", data:[20,30,50,40,35,25], backgroundColor:"rgba(239,68,68,0.5)"},
        {label:"After", data:[50,35,45,42,37,27], backgroundColor:"rgba(34,197,94,0.6)"}
    ]
};
const inventoryChart = new Chart(invCtx,{
    type:'bar',
    data: inventoryData,
    options:{
        responsive:true,
        plugins:{
            legend:{position:'top'},
            tooltip:{
                callbacks:{
                    label:function(context){
                        const value = context.parsed.y;
                        const before = inventoryData.datasets[0].data[context.dataIndex];
                        const after = inventoryData.datasets[1].data[context.dataIndex];
                        return `${context.dataset.label}: ${value} vehicles | Before: ${before}, After: ${after}`;
                    }
                }
            }
        },
        animation:{duration:800}
    }
});

// Slider simulation
const slider = document.getElementById('demandSlider');
const sliderValue = document.getElementById('sliderValue');

slider.addEventListener('input', ()=>{
    const percent = +slider.value;
    sliderValue.textContent = percent;
    const baseForecast = [120,150,180,240,300,360,400,420];
    evChart.data.datasets[0].data = baseForecast.map(v => v * (1 + percent/100));
    evChart.update();
});
</script>

</body>
</html>
